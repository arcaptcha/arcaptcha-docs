
# آرکپچا نسخه ۳

نسخه ۳ آرکپچا یک امتیاز برای هر درخواست کاربر برمی گرداند. این امتیاز بر اساس تعامل کاربر با سایت شما محاسبه می شود و شما را قادر می سازد تا اقدام مناسبی برای سایت خود انجام دهید. برای ثبت نام  کلیدهای نسخه ۳ آرکپچا  [اینجا](https://arcaptcha.ir/) کلیک کنید.

این صفحه نحوه فعال کردن و سفارشی کردن نسخه ۳ آرکپچا را برای صفحه وب شما توضیح می دهد.

## قرار دادن در وب سایت شما

نسخه ۳ آرکپچا منجر به اختلال در کار کاربران نمی شود، بنابراین می توانید آن را هر زمان که دوست دارید بدون تأثیر بر تبدیل اجرا کنید. آرکپچا زمانی بهترین نتیحه را می دهد که بیشترین زمینه را در مورد تعاملات با سایت شما داشته باشد، که از مشاهده رفتار قانونی و توهین آمیز ناشی می شود. به همین دلیل، توصیه می‌کنیم تأیید آرکپچا را در فرم‌ها یا اقدامات و همچنین در پس‌زمینه صفحات برای تجزیه و تحلیل قرار دهید.

:::note
توجه: توکن های آرکپچا پس از دو دقیقه منقضی می شوند. اگر از یک عملکرد به کمک آرکپچا محافظت می کنید، مطمئن شوید که به جای بارگذاری صفحه، زمانی که کاربر اقدامی را انجام می دهد، فراخوانی لازم را اجرا کنید.
:::

می‌توانید آرکپچا را در همان صفحه روی هر تعداد اکشن که می‌خواهید اجرا کنید.

## چالش را به صورت خودکار به یک دکمه متصل کنید

ساده ترین روش برای استفاده از نسخه ۳ آرکپچا در صفحه شما این است که منابع جاوا اسکریپت لازم را اضافه کنید و چند ویژگی به دکمه html خود اضافه کنید.

1. API جاوا اسکریپت را بارگیری کنید.
```html
<script src="https://widget.arcaptcha.ir/3/api.js" async defer></script>
```

2. برای مدیریت توکن، یک تابع callback اضافه کنید.
```html
<script>
  function onSubmit(token) {
    document.getElementById("demo-form").submit();
  }
</script>
```

3. ویژگی ها را به دکمه html خود اضافه کنید.
```html
<button
  class="arcaptcha"
  data-sitekey="ARCaptcha_site_key"
  data-callback="onSubmit"
  data-action="submit"
>
  Submit
</button>
```

## چالش را به صورت برنامه ای فراخوانی کنید

اگر می‌خواهید کنترل بیشتری روی زمان اجرای آرکپچا داشته باشید، می‌توانید از متد `execute` در آبجکت `arcaptcha` استفاده کنید. برای انجام این کار، باید یک پارامتر «رندر» به بارگذاری اسکریپت آرکپچا اضافه کنید.

1. API جاوا اسکریپت را با کلید سایت خود بارگیری کنید.

```html
<script src="https://widget.arcaptcha.ir/3/api.js?render=ARCaptcha_site_key"></script>
```

2. `arcaptcha.execute` را برای هر اقدامی که می‌خواهید محافظت کنید، فراخوانی کنید.

```html
<script>
  function onClick(e) {
    e.preventDefault();
    arcaptcha.ready(function () {
      arcaptcha
        .execute("ARCaptcha_site_key", { action: "submit" })
        .then(function (token) {
          // Add your logic to submit to your backend server here.
        });
    });
  }
</script>
```
3. توکن را فوراً با درخواست [تأیید](/verify) به backend خود ارسال کنید.

## تفسیر امتیاز

آرکپچا ورژن ۳ یک امتیاز برمی گرداند (1.0 به احتمال زیاد یک تعامل خوب است، 0.0 به احتمال زیاد یک ربات است). بر اساس امتیاز، می توانید اقدام متنوعی را در زمینه سایت خود انجام دهید. هر سایتی متفاوت است، اما در زیر چند نمونه از نحوه استفاده سایت ها از امتیاز آورده شده است. مانند مثال های زیر، به جای مسدود کردن ترافیک، برای محافظت بهتر از سایت خود، در پشت صحنه اقدام کنید.


| نمونه ها  | توصیه ها                                                                                                |
| ---------- | -------------------------------------------------------------------------------------------------------------- |
| خانه   | هنگام فیلتر کردن اسکراپرها، نمای منسجمی از ترافیک خود را در کنسول مدیریت مشاهده کنید.                             |
| صفحه ورود      | با امتیازات پایین، برای جلوگیری از حملات پر کردن اعتبار، به احراز هویت دو عاملی یا تأیید ایمیل نیاز دارید. |
| اجتماعی     | درخواست‌های دوستی بی‌پاسخ از سوی کاربران توهین‌آمیز را محدود کنید و نظرات پرخطر را برای نظارت ارسال کنید.                     |
| تجارت الکترونیک | فروش واقعی خود را مقدم بر ربات ها قرار دهید و معاملات پرخطر را شناسایی کنید.|


آرکپچا با دیدن ترافیک واقعی در سایت شما آموزش میبیند. به همین دلیل، نمرات در یک محیط صحنه سازی یا بلافاصله پس از اجرا ممکن است با تولید متفاوت باشد. از آنجایی که آرکپچا نسخه 3 هرگز جریان کاربر را قطع نمی کند، می توانید ابتدا آرکپچا را بدون هیچ اقدامی اجرا کنید و سپس با مشاهده ترافیک خود در کنسول مدیریت، در مورد آستانه تصمیم گیری کنید. به طور پیش فرض، می توانید از آستانه 0.5 استفاده کنید.

## پاسخ تایید سایت

مانند آرکپچا نسخه ۲ یا کپچا مخفی برای  [تائید پاسخ درخواست](/verify) ارسال کنید.

پاسخ یک شی JSON است:

```js
{
  "success": true|false,      // معتبر بودن درخواست
  "score": number             // امتیاز برای درخواست (0.0 - 1.0)
  "action": string            // نام action برای این درخواست (برای تأیید مهم است)
  "challenge_ts": timestamp,  // مهر زمانی بار چالش (ISO format yyyy-MM-dd'T'HH:mm:ssZZ)
  "hostname": string,         // نام میزبان سایتی که آرکپچا در آن حل شد
  "error-codes": [...]        // اختیاری
}

```

## نکات

1. `()arcaptcha.ready` تابع شما را هنگام بارگیری کتابخانه آرکپچا اجرا می کند. api.js، api.js را قبل از اسکریپت‌های خود که آرکپچا را فراخوانی می‌کنند، اضافه کنید، یا به استفاده از onload callback که با API v2 تعریف شده است، ادامه دهید.
2. فراخوانی `execute` را به اقدامات جالب یا حساسی مانند ثبت نام، تنظیم مجدد رمز عبور، خرید یا پخش متصل کنید.